<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prepaid Plans</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/css/main.min.css" rel=stylesheet>

    <link href="/User/plans.css" rel="stylesheet">
</head>

<body class="bg-danger">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="HomePage.html">
                <i class="bi bi-phone-flip fs-4"></i> Mobi-Comm
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="HomePage.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/User/PrepaidPlans.html">Plans</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link " href="About.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Contact.html">Contact Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-light fs-5" href="#" data-bs-toggle="modal"
                            data-bs-target="#loginModal">
                            <i class="bi bi-person-circle"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid p-0">
        <!-- Animated Banner -->
        <div class="banner d-flex align-items-end justify-content-center position-relative">
            <div class="text-center mb-5">
                <h1 class="display-4 banner-title animate-fade-in"><b>Explore Various Plans</b></h1>
                <p class="lead banner-subtitle animate-slide-up"><b>Discover amazing Plans and Offers tailored for
                        you.</b></p>
            </div>
            <!-- Animated Background Overlay -->
            <div class="banner-overlay"></div>
        </div>

        <!-- Search and Filter Section -->
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-4">
                    <input type="text" id="searchPlans" class="form-control" placeholder="Search plans..."
                        onkeyup="filterPlans()">
                </div>
                <div class="col-md-2">
                    <select id="filterValidity" class="form-control" onchange="filterPlans()">
                        <option value="">Validity</option>
                        <option value="7">Up to 7 Days</option>
                        <option value="28">Up to 28 Days</option>
                        <option value="90">Up to 90 Days</option>
                        <option value="365">Annual</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select id="filterData" class="form-control" onchange="filterPlans()">
                        <option value="">Data</option>
                        <option value="1GB">1GB+</option>
                        <option value="2GB">2GB+</option>
                        <option value="5GB">5GB+</option>
                        <option value="unlimited">Unlimited</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select id="filterSMS" class="form-control" onchange="filterPlans()">
                        <option value="">SMS</option>
                        <option value="50">50+</option>
                        <option value="100">100+</option>
                        <option value="300">300+</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select id="filterPrice" class="form-control" onchange="filterPlans()">
                        <option value="">Price</option>
                        <option value="100">Under ₹100</option>
                        <option value="200">Under ₹200</option>
                        <option value="500">Under ₹500</option>
                        <option value="1000">Under ₹1000</option>
                    </select>
                </div>
            </div>
        </div>


        <!-- Plans Section -->
        <div class="row mt-4 ms-2 me-2">
            <!-- Sidebar -->
            <div class="col-md-3 text-primary">
                <div class="plan-category bg-success p-3 rounded shadow ">
                    <h5 class="text-primary">Plan Category</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-decoration-none text-primary"
                                onclick="showPlans('popular', 'Popular Plans')">Popular Plans</a></li>
                        <li><a href="#" class="text-decoration-none text-primary"
                                onclick="showPlans('data', 'Data Packs')">Data Packs</a></li>
                        <li><a href="#" class="text-decoration-none text-primary"
                                onclick="showPlans('unlimited', 'Unlimited Plans')">Unlimited Plans</a></li>
                        <li><a href="#" class="text-decoration-none text-primary"
                                onclick="showPlans('validity', 'Validity Plans')">Validity Plans</a></li>
                        <li><a href="#" class="text-decoration-none text-primary"
                                onclick="showPlans('entertainment', 'Entertainment Plans')">Entertainment Plans</a></li>
                        <li><a href="#" class="text-decoration-none text-primary"
                                onclick="showPlans('annual', 'Annual Plans')">Annual Plans</a></li>
                    </ul>
                </div>
            </div>

            <!-- Plans Section -->
            <div class="col-md-9">
                <h3 id="plan-heading" class="mb-4">Popular Plans</h3>
                <div id="plans-container" class="row">
                    <!-- Plans will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for View Details -->
    <div class="modal fade" id="planDetailsModal" tabindex="-1" aria-labelledby="planDetailsLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="planDetailsLabel">Plan Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Price:</strong> <span id="modal-price"></span></p>
                    <p><strong>Validity:</strong> <span id="modal-validity"></span></p>
                    <p><strong>Data:</strong> <span id="modal-data"></span></p>
                    <p><strong>Calls:</strong> <span id="modal-calls"></span></p>
                    <p><strong>SMS:</strong> <span id="modal-sms"></span></p>
                    <p><strong>Description:</strong> <span id="modal-description"></span></p>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
                    <button id="proceed-to-payment" class="btn btn-danger">Proceed to Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-auto">
        <!-- Footer Top Section -->
        <div class="footer-top py-5">
            <div class="container">
                <div class="row g-4">
                    <!-- Company Info -->
                    <div class="col-lg-4 col-md-6">
                        <h4 class="text-white fw-bold">Mobi-Comm Service Pvt Ltd</h4>
                        <p class="text-light">Connecting People, Anytime, Anywhere.</p>
                        <p class="text-light"><i class="bi bi-geo-alt"></i> 123, Tech Park, Mumbai, India</p>
                        <p class="text-light"><i class="bi bi-envelope"></i> support@mobi-comm.com</p>
                        <p class="text-light"><i class="bi bi-telephone"></i> +91 98765 43210</p>
                    </div>

                    <!-- Quick Links -->
                    <div class="col-lg-2 col-md-6">
                        <h5 class="text-white">Quick Links</h5>
                        <ul class="list-unstyled">
                            <li><a href="About.html">About Us</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Refund Policy</a></li>
                            <li><a href="#">FAQs</a></li>
                            <li><a href="#">Contact Us</a></li>
                        </ul>
                    </div>

                    <!-- Services -->
                    <div class="col-lg-2 col-md-6">
                        <h5 class="text-white">Our Services</h5>
                        <ul class="list-unstyled">
                            <li><a href="#">Mobile Recharges</a></li>
                            <li><a href="#">DTH Recharges</a></li>
                            <li><a href="#">Bill Payments</a></li>
                            <li><a href="#">Data Plans</a></li>
                            <li><a href="#">International Roaming</a></li>
                        </ul>
                    </div>

                    <!-- Social Media & App Download -->
                    <div class="col-lg-4 col-md-6">
                        <h5 class="text-white">Connect With Us</h5>
                        <p class="text-light">Follow us on social media for the latest updates.</p>
                        <div class="social-icons">
                            <a href="#" class="me-2"><i class="bi bi-facebook"></i></a>
                            <a href="#" class="me-2"><i class="bi bi-twitter"></i></a>
                            <a href="#" class="me-2"><i class="bi bi-instagram"></i></a>
                            <a href="#" class="me-2"><i class="bi bi-linkedin"></i></a>
                        </div>
                        <h5 class="text-white mt-4">Download Our App</h5>
                        <div class="app-buttons">
                            <a href="#"><i class="bi bi-google-play" alt="Google Play" class="store-btn"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Bottom Section -->
        <div class="footer-bottom py-3 text-center">
            <div class="container">
                <p class="mb-0 text-light">&copy; 2025 Mobi-Comm Service Pvt Ltd. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        let plansData = {}; // To store fetched plans data

        // Fetch plans data from JSON file
        fetch('../db.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                // Access the plans object from the JSON data
                plansData = data.plans[0];
                // Display Popular Plans by default on page load
                showPlans('popular', 'Popular Plans');
            })
            .catch(error => {
                console.error('Error fetching plans data:', error);
                alert('Failed to load plans. Please try again later.');
            });

        // Function to dynamically update plans and heading
        function showPlans(category, heading) {
            const plans = plansData[category];
            const plansContainer = document.getElementById('plans-container');
            const planHeading = document.getElementById('plan-heading');

            // Update the heading text
            planHeading.textContent = heading;

            // Clear and populate the plans container
            plansContainer.innerHTML = '';

            if (plans) {
                plans.forEach(plan => {
                    const planCard = `
                        <div class="col-md-4">
                            <div class="plan-card fadeIn">
                                <div class="plan-header">${plan.price}</div>
                                <span class="badge bg-secondary">Best Seller</span>
                                <span class="badge bg-warning text-dark">Limited Time</span>
                                <p><i class="bi bi-calendar"></i> Validity: ${plan.validity}</p>
                                <p><i class="bi bi-wifi"></i> Data: ${plan.data}</p>
                                <p><i class="bi bi-telephone"></i> Calls: ${plan.calls}</p>
                                <p><i class="bi bi-chat-dots"></i> SMS: ${plan.sms}</p>
                                <p class="text-muted">${plan.description}</p>



                                <button class="btn btn-primary btn-sm" onclick="goToPayment('${plan.price}', '${plan.validity}', '${plan.data}','${plan.calls}','${plan.sms}', '${plan.description}')">Recharge</button>
                                <button class="btn btn-danger btn-sm" onclick="viewDetails('${plan.price}', '${plan.validity}', '${plan.data}','${plan.calls}','${plan.sms}', '${plan.description}')">View Details</button>
                            </div>
                        </div>
                    `;
                    plansContainer.innerHTML += planCard;
                });
            } else {
                plansContainer.innerHTML = '<h5>No plans available for this category.</h5>';
            }

            // Scroll to the plan heading
            planHeading.scrollIntoView({ behavior: 'smooth' });
        }

        function goToPayment(price, validity, data, calls, sms, description) {
            const url =
                `paymentPage.html?price=${encodeURIComponent(price)}&validity=${encodeURIComponent(validity)}&data=${encodeURIComponent(data)}&calls=${encodeURIComponent(calls)}&sms=${encodeURIComponent(sms)}&description=${encodeURIComponent(description)}`;
            window.location.href = url;
        }

        function viewDetails(price, validity, data, calls, sms, description) {
            document.getElementById('modal-price').textContent = price;
            document.getElementById('modal-validity').textContent = validity;
            document.getElementById('modal-data').textContent = data;
            document.getElementById('modal-calls').textContent = calls;
            document.getElementById('modal-sms').textContent = sms;
            document.getElementById('modal-description').textContent = description;


            const proceedToPaymentBtn = document.getElementById('proceed-to-payment');
            proceedToPaymentBtn.onclick = () => {
                goToPayment(price, validity, data, calls, sms, description);
            };

            const modal = new bootstrap.Modal(document.getElementById('planDetailsModal'));
            modal.show();
        }

        function filterPlans() {
            let searchQuery = document.getElementById("searchPlans").value.toLowerCase();
            let validityFilter = document.getElementById("filterValidity").value;
            let dataFilter = document.getElementById("filterData").value;
            let smsFilter = document.getElementById("filterSMS").value;
            let priceFilter = document.getElementById("filterPrice").value;

            const plansContainer = document.getElementById("plans-container");
            plansContainer.innerHTML = "";

            let filteredPlans = Object.values(plansData).flat().filter(plan => {
                let matchSearch = searchQuery === "" || plan.description.toLowerCase().includes(searchQuery);
                let matchValidity = !validityFilter || parseInt(plan.validity) <= parseInt(validityFilter);
                let matchData = !dataFilter || plan.data.includes(dataFilter);
                let matchSMS = !smsFilter || parseInt(plan.sms) >= parseInt(smsFilter);
                let matchPrice = !priceFilter || parseInt(plan.price.replace("₹", "")) <= parseInt(priceFilter);

                return matchSearch && matchValidity && matchData && matchSMS && matchPrice;
            });

            if (filteredPlans.length === 0) {
                plansContainer.innerHTML = "<h5 class='text-center mt-3'>No matching plans found.</h5>";
                return;
            }

            filteredPlans.forEach(plan => {
                const planCard = `
                <div class="col-md-4">
                    <div class="plan-card fadeIn">
                        <div class="plan-header">${plan.price}</div>
                        <p><i class="bi bi-calendar"></i> Validity: ${plan.validity}</p>
                        <p><i class="bi bi-wifi"></i> Data: ${plan.data}</p>
                        <p><i class="bi bi-telephone"></i> Calls: ${plan.calls}</p>
                        <p><i class="bi bi-chat-dots"></i> SMS: ${plan.sms}</p>
                        <p class="text-muted">${plan.description}</p>
                        <button class="btn btn-primary btn-sm" onclick="goToPayment('${plan.price}', '${plan.validity}', '${plan.data}','${plan.calls}','${plan.sms}', '${plan.description}')">Recharge</button>
                        <button class="btn btn-danger btn-sm" onclick="viewDetails('${plan.price}', '${plan.validity}', '${plan.data}','${plan.calls}','${plan.sms}', '${plan.description}')">View Details</button>
                    </div>
                </div>
            `;
                plansContainer.innerHTML += planCard;
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>
</body>

</html>